# Generated by Django 3.2.6 on 2021-08-30 22:32

from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Experiment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('slug', models.SlugField(blank=True, db_index=False, help_text='Slug for URL.', max_length=128, unique=True, verbose_name='slug')),
                ('created_date', models.DateTimeField(auto_now_add=True, help_text='Date of creation', verbose_name='created at')),
                ('modified_date', models.DateTimeField(auto_now=True, help_text='Date of last modification', verbose_name='modified at')),
                ('is_active', models.BooleanField(default=False, help_text='Is active', verbose_name='active')),
                ('activation_date', models.DateTimeField(blank=True, help_text='Date of activation', null=True, verbose_name='activated at')),
                ('name', models.CharField(help_text='Name of experiment; max 30 letters.', max_length=30, verbose_name='name')),
                ('email', models.EmailField(help_text='This address will appear in autogenerated e-mails. Usually this will be the address to the person who registers the experiment in Expmotor.', max_length=254, verbose_name='Inviter email')),
                ('phone', models.CharField(help_text="Invite manager's phone number.", max_length=8, validators=[django.core.validators.RegexValidator(message="Phone number must be entered in the format: '12345678'.", regex='^\\d{8}$')], verbose_name='phone')),
                ('registration_help', models.TextField(default='\n<p> This page lets you register for the experiment.</p>\n    \n<p> You need to tick off the session you would like to take part in.</p>\n\n', help_text='This text will meet participants when registering for participation.', verbose_name='registration mail')),
                ('confirmation_request', models.TextField(default='\nYou have registered for an experiment using "Expmotor".\n        \nPlease confirm your email address by clicking on this link: \n        \n   {{ url }}\n\nThis is an auto-generated email.\n', help_text='Message in email asking subjects to confirm their email address.', verbose_name='confirmation mail')),
                ('final_instructions', models.TextField(default='\nWe confirm your participation in the experiment.\n\nYou are registered for participation {{ date }} at {{ place }}, {{ time }}.\n\nThe research group is grateful for your contribution,\nand it is important to us that you take part. \n\nShould you need to cancel, or get in touch with us for\nsome other reason, you can do so by email to {{ manageremail }},\nor contact {{ manager }} by phone: {{ managerphone }}. \n\n\nOn behalf of the research group,\n{{ manager }}.\n', help_text='Message in email sent after confirmation of email address.', verbose_name='instructions mail')),
                ('manager', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='experiments', to=settings.AUTH_USER_MODEL, verbose_name='manager')),
            ],
            options={
                'ordering': ['-activation_date', '-created_date'],
                'get_latest_by': 'activation_date',
                'abstract': False,
            },
        ),
    ]
